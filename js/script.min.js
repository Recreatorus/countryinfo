async function writingAll(e,t){wrapper=document.querySelector("["+t+"]");const n=document.getElementsByClassName(e);for(;wrapper;)for(i=0;i<n.length;i++){const e=n[i].textContent;await write(e),await sleep(500),await erase(),await sleep(500)}}async function write(e){let t=0;for(;t<e.length;){await sleep(100),t++,wrapper.innerHTML=e.substring(0,t)}}async function erase(){for(;wrapper.textContent.length;){await sleep(50),wrapper.textContent=wrapper.textContent.substring(0,wrapper.textContent.length-2)}}function offsetToMs(e){const[t,n]=e.replace(/utc/i,"").split(":").map(e=>Number(e.replace(/\D/,""))),a=60*t*60*1e3+60*n*1e3;return e.includes("-")?-a:a}let wrapper;const sleep=e=>new Promise(t=>setTimeout(t,e));writingAll("item","data-text");var currentDate=new Date;console.log("Time: "+currentDate.getHours()+":"+currentDate.getMinutes()),console.log("UTC Time: "+currentDate.getUTCHours()+":"+currentDate.getUTCMinutes());const searchcountry=async e=>{const t=await fetch("./data/countries.json");let n=(await t.json()).filter(t=>{const n=new RegExp(`^${e}`,"gi");return t.country.match(n)||t.abbr.match(n)});0===e.length&&(n=[],countryList.innerHTML=""),outputHtml(n);let a=document.querySelectorAll(".capitalCity");a.forEach(e=>{e.addEventListener("click",function(){a.forEach(e=>e.classList.remove("active")),this.classList.add("active");const e=`https://api.openweathermap.org/data/2.5/weather?q=${this.querySelector("span").textContent||this.querySelector("span").innerText}&appid=4d8fb5b93d4af21d66a2948710284366&units=metric`;fetch(e).then(e=>e.json()).then(e=>{const{main:t,name:n,sys:a,weather:i}=e,c=`./img/weather/${i[0].icon}.svg`,r=document.querySelector(".capitalCity.active #capitalWeather"),s=`\n            <div class="city-name" data-name="${n},${a.country}">\n              <span>${n}</span>\n            </div>\n            <div class="city-temp">${Math.round(t.temp)}<sup>°C</sup></div>\n            <figure>\n              <img class="city-icon" src="${c}" alt="${i[0].description}">\n              <figcaption>${i[0].description}</figcaption>\n            </figure>\n          `;r.innerHTML=s}).catch(()=>{a.textContent="Please search for a valid city"})})});let i=document.querySelectorAll(".currency");i.forEach(e=>{e.addEventListener("click",function(){i.forEach(e=>e.classList.remove("currency-open")),this.classList.add("currency-open");var e=this.querySelector("span").textContent||this.querySelector("span").innerText;fetch("./data/latest.json").then(e=>e.json()).then(t=>{const n=document.querySelector(".currency-open #currencyData"),a=`\n            <span>1 US$ = ${t[0].rates[e].toFixed(2).replace(".",",")} ${e}</span>\n          `;n.innerHTML=a}).catch(()=>{i.textContent="There is no data",console.log("There is no data")})})})},outputHtml=e=>{if(e.length>0){const t=e.map(e=>`\n          <div class="card">\n            <div class="card-top">\n              <div class="card-title">${e.country}</div>\n              <img src="./img/flags/${e.code.toLowerCase()}.svg">\n            </div>\n            <div class="card-data">\n              <div class="population">\n              Population: <span>${e.population.replace(/\B(?=(\d{3})+(?!\d))/g," ")}</span></div>\n              <div class="capitalCity">Capital: <span class="capitalName">${e.capital}</span>\n                <div id="capitalWeather"></div>\n              </div>\n              <div class="countryCode">Country Code: <span>${e.phoneCode}</span></div>\n              <div class="currency">Сurrency: <span>${e.currency}</span>\n                <div id="currencyData"></div>\n              </div>\n              <div class="time">Time in the capital: <span>${new Date((new Date).getTime()+offsetToMs(`${e.timezones}`)).toUTCString()}</span></div>\n            </div>\n          </div>\n        `).join("");document.getElementById("countryList").innerHTML=t}};document.getElementById("search").addEventListener("input",()=>searchcountry(search.value));